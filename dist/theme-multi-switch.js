var g=Object.defineProperty;var b=(h,r,e)=>r in h?g(h,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[r]=e;var u=(h,r,e)=>(b(h,typeof r!="symbol"?r+"":r,e),e);class v extends HTMLElement{constructor(){super();u(this,"shadow");this.shadow=this.attachShadow({mode:"open"})}getA(e,t=""){return this.getAttribute(e)||t}getArray(e,t=[]){const a=this.getA(e,"");if(!a)return t;let s=[];try{s=JSON.parse(a)}catch{s=a.split(",")}return Array.isArray(s)?s:t}get layout(){return this.getA("layout","around top")}get themes(){return this.getArray("themes",["light","auto","dark"])}get meta(){return this.getArray("meta-colors",[])}get theme(){return this.getA("theme")||this.themes[1]}set theme(e){this.setAttribute("theme",e)}static get observedAttributes(){return["themes","theme","meta-colors","knob-width","layout"]}connectedCallback(){const e=window.localStorage.getItem("theme");e&&this.themes.indexOf(e)>=0&&(this.theme=e),this.render(),this.addEventListeners()}addEventListeners(){this.shadow.addEventListener("click",e=>{const t=e.target;t!=null&&t.checked&&t.value!==this.theme&&(this.theme=t.value)},!1),document.addEventListener("theme-switch",e=>{const t=e.detail;t&&t!==this.theme&&this.themes.includes(t)&&(console.log("theme-switch event received",t),this.theme=t)})}setTheme(e,t){const a=e.themes.indexOf(t);if(a>-1){const s=document.querySelector("html"),l=document.querySelector("meta[name='theme-color']");let n=e.meta[a];if(s&&s.setAttribute("data-theme",t),l&&n){if(n==="auto"){const o=e.themes.indexOf("light"),d=e.themes.indexOf("dark");window.matchMedia("(prefers-color-scheme: dark)").matches&&d>-1?n=e.meta[d]:window.matchMedia("(prefers-color-scheme: light)").matches&&o>-1&&(n=e.meta[o])}l.setAttribute("content",n)}window.localStorage.setItem("theme",t),this.dispatchEvent(new CustomEvent("theme-switch",{detail:t,bubbles:!0,cancelable:!0,composed:!0}))}}attributeChangedCallback(e,t,a){e==="theme"&&a!==t&&this.setTheme(this,a)}render(){const e=this.themes,t=e.map(i=>`:host([theme="${i}"]) [part="${i}"]`).join(",")+"{color: var(--theme-switch-highlight, inherit)}",a=e.map((i,m)=>`:host([theme="${i}"]) .knob { left: ${m/(e.length-1)*100}%; transform: translateX(-${m/(e.length-1)*100}%); }`).join("");let s="1em 0 0",l="top: 0px;";this.layout.includes("bottom")&&(s="0 0 1em",l="bottom: 0px;"),e.length<3&&this.layout.includes("around")&&(s="0");const n=`<style>.wrap{position:relative;display:inline-flex;gap:.3em;align-items:end}.side{height:1.2em;padding:${s}}.mid{position:relative;padding:${s}}label{cursor:pointer;line-height:1;height:100%;display:flex;align-items:center;font-weight:700;font-size:.8em}input{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;cursor:pointer;opacity:0}.mid .labels{display:flex;position:absolute;width:100%;${l}text-align:center}.mid label{width:100%;display:flex;justify-content:center}.track{background:var(--theme-switch-track,#88888822);height:1em;border:.1em solid var(--theme-switch-track-border,currentColor);border-radius:.2em;padding:0 .1em;position:relative;grid-area:switch;display:flex}.track span{width:calc(var(--theme-switch-knob-width,1) * .9em);flex-shrink:0;bottom:0;position:relative}.knob{left:50%;transform:translateX(-50%);position:absolute;top:0;background:var(--theme-switch-knob,currentColor);transition:all .3s cubic-bezier(.4,0,.2,1);width:calc(var(--theme-switch-knob-width,1) * 1em);height:1em;border-radius:.1em}${a}${t}</style>`;let o=e.map(i=>`<label title="${i}" for="${i}" part="${i}"><slot name="${i}">${i}</slot></label>`);const d=e.map(i=>`<span><input value=${i} type="radio" name="theme" id="${i}" ?checked=${this.theme===i} aria-label="${i} theme" /></span>`);let c=["",""];this.layout.includes("around")&&(c[0]=`<div class="side">${o[0]}</div>`,c[1]=`<div class="side">${o[this.themes.length-1]}</div>`,o.pop(),o.shift());let p=`<div class="wrap">${c[0]}<div class="mid"><div class="labels">${o.join("")}</div><div class="track" part="track">${d.join("")}<div class="knob" part="knob"></div></div></div>${c[1]}</div>`;this.shadow.innerHTML=`${n}${p}`}}customElements.define("theme-switch",v);
//# sourceMappingURL=theme-multi-switch.js.map
