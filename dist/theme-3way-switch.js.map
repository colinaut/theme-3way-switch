{"version":3,"file":"theme-3way-switch.js","sources":["../src/main.ts"],"sourcesContent":["export default class ThemeSwitch extends HTMLElement {\n\tprivate shadow: ShadowRoot;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.shadow = this.attachShadow({ mode: \"open\" });\n\t}\n\n\tprivate getA(attr: string, fallback: string = \"\"): string {\n\t\treturn this.getAttribute(attr) || fallback;\n\t}\n\n\tget left() {\n\t\treturn this.getA(\"left\", \"light\");\n\t}\n\tget mid() {\n\t\treturn this.getA(\"mid\", \"auto\");\n\t}\n\tget right() {\n\t\treturn this.getA(\"right\", \"dark\");\n\t}\n\tget metaLeft() {\n\t\treturn this.getA(\"meta-left\");\n\t}\n\tget metaMid() {\n\t\treturn this.getA(\"meta-mid\");\n\t}\n\tget metaRight() {\n\t\treturn this.getA(\"meta-right\");\n\t}\n\tget theme() {\n\t\treturn this.getA(\"theme\") || this.mid;\n\t}\n\n\tset theme(theme) {\n\t\tthis.setAttribute(\"theme\", theme);\n\t}\n\n\tstatic get observedAttributes(): string[] {\n\t\treturn [\"left\", \"mid\", \"right\", \"theme\", \"meta-left\", \"meta-mid\", \"meta-right\"];\n\t}\n\n\tprivate active = \"mid\";\n\n\tpublic connectedCallback(): void {\n\t\tconst savedTheme = window.localStorage.getItem(\"theme\");\n\t\tif (savedTheme) {\n\t\t\tthis.setTheme(this, savedTheme);\n\t\t}\n\t\tthis.render();\n\t\tthis.addEventListeners();\n\t\tdocument.addEventListener(\"theme-switch\", (event) => {\n\t\t\tif (this.theme !== (<CustomEvent>event).detail) this.setTheme(this, (<CustomEvent>event).detail);\n\t\t});\n\t}\n\n\tprivate addEventListeners(): void {\n\t\tthis.shadow.addEventListener(\n\t\t\t\"click\",\n\t\t\t(event) => {\n\t\t\t\tthis.eventListeners(this, event);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t}\n\n\tprivate eventListeners($this: ThemeSwitch, e: Event): void {\n\t\tconst el = e.target as HTMLInputElement;\n\t\tif (el?.checked) {\n\t\t\t$this.setTheme($this, el.value);\n\t\t}\n\t\t$this.dispatchEvent(\n\t\t\tnew CustomEvent(\"theme-switch\", {\n\t\t\t\tdetail: this.theme,\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true,\n\t\t\t\tcomposed: true,\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate setTheme($this: ThemeSwitch, theme: string): void {\n\t\tconst html = document.querySelector(\"html\");\n\n\t\t// Set data-theme on html element\n\t\tif (html) {\n\t\t\thtml.setAttribute(\"data-theme\", theme);\n\t\t}\n\n\t\t// Default theme is mid\n\t\tlet active = \"mid\";\n\t\tlet color = $this.metaMid;\n\n\t\t// Switch if otherwise\n\t\tif (theme === $this.left) {\n\t\t\tactive = \"left\";\n\t\t\tcolor = $this.metaLeft;\n\t\t}\n\t\tif (theme === $this.right) {\n\t\t\tactive = \"right\";\n\t\t\tcolor = $this.metaRight;\n\t\t}\n\n\t\t// Set meta theme-color if available\n\t\tconst metaThemeColor = document.querySelector(\"meta[name='theme-color']\");\n\t\tif (metaThemeColor && color) {\n\t\t\tconsole.log(color);\n\t\t\tmetaThemeColor.setAttribute(\"content\", color);\n\t\t}\n\n\t\t// Store theme\n\t\twindow.localStorage.setItem(\"theme\", theme);\n\n\t\tconsole.log(active, theme);\n\n\t\t// set active and theme\n\t\t$this.active = active;\n\t\t$this.theme = theme;\n\t}\n\n\tpublic attributeChangedCallback() {\n\t\t// console.log(\"changed\", name, oldValue, newValue);\n\t\tthis.render();\n\t}\n\n\tprivate render() {\n\t\tthis.shadow.innerHTML = `\n        <!-- css-->\n        <style>\n            .wrap {\n                position: relative;\n                display: inline-flex;\n                gap: 0.3em;\n                align-items: end;\n            }\n            .side {\n                height: 1.2em;\n            }\n            .mid {\n                position: relative;\n                padding-top: 1em;\n            }\n            label {\n                cursor: pointer;\n                line-height: 1;\n                height: 100%;\n                display: flex;\n                align-items: center;\n                font-weight: 700;\n                font-size: 0.8em;\n            }\n            .track span {\n                width: 0.8em;\n                flex-shrink: 0;\n                bottom: 0px;\n                position: relative;\n            }\n            input {\n                position: absolute;\n                top: 0px;\n                bottom: 0px;\n                left: 0px;\n                right: 0px;\n                width: 100%;\n                height: 100%;\n                cursor: pointer;\n                opacity: 0;\n            }\n            .mid label {\n                display: block;\n                position: absolute;\n                width: 100%;\n                top: 0px;\n                text-align: center;\n            }\n            .knob {\n                left: 50%;\n                transform: translateX(-50%);\n                position: absolute;\n                top: 0em;\n                background: var(--theme-switch-knob, currentColor);\n                transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);\n                width: 1em;\n                height: 1em;\n                border-radius: 0.1em;\n            }\n            .track {\n                background: var(--theme-switch-track, #88888822);\n                height: 1em;\n                border: 0.1em solid var(--theme-switch-track-border, currentColor);\n                border-radius: 0.2em;\n                padding: 0 0.1em;\n                position: relative;\n                grid-area: switch;\n                width: 2.4em;\n                display: flex;\n            }\n            [data-active=\"left\"] .knob {\n                left: 0;\n                transform: translateX(0%);\n            }\n            [data-active=\"right\"] .knob {\n                left: 100%;\n                transform: translateX(-100%);\n            }\n            [data-active=\"left\"] [part=\"left\"],\n            [data-active=\"mid\"] [part=\"mid\"],\n            [data-active=\"right\"] [part=\"right\"] {\n                color: var(--theme-switch-highlight, inherit);\n            }\n        </style>\n        <!-- html -->\n        <div class=\"wrap\" data-active=${this.active}>\n            <div class=\"side\">\n                <label title=\"${this.left}\" for=\"left\" part=\"left\">\n                    <slot name=\"left\">${this.left}</slot>\n                </label>\n            </div>\n            <div class=\"mid\">\n                <label title=\"${this.mid}\" for=\"mid\" part=\"mid\">\n                    <slot name=\"mid\">${this.mid}</slot>\n                </label>\n                <div class=\"track\" part=\"track\">\n                    <span><input value=${this.left} type=\"radio\" name=\"theme\" id=\"left\" ?checked=${this.active === \"left\"} aria-label=\"${this.left} theme\" /></span>\n                    <span><input value=${this.mid} type=\"radio\" name=\"theme\" id=\"mid\" ?checked=${this.active === \"mid\"} aria-label=\"${this.mid} theme\" /></span>\n                    <span><input value=${this.right} type=\"radio\" name=\"theme\" id=\"right\" ?checked=${this.active === \"right\"} aria-label=\"${this.right} theme\" /></span>\n                    <div class=\"knob\" part=\"knob\"></div>\n                </div>\n            </div>\n            <div class=\"side\">\n                <label title=\"${this.right}\" for=\"right\" part=\"right\">\n                    <slot name=\"right\">${this.right}</slot>\n                </label>\n            </div>\n        </div>\n    `;\n\t}\n}\ncustomElements.define(\"theme-switch\", ThemeSwitch);\n"],"names":["ThemeSwitch","__publicField","attr","fallback","theme","savedTheme","event","$this","el","html","active","color","metaThemeColor"],"mappings":"wKAAA,MAAqBA,UAAoB,WAAY,CAGpD,aAAc,CACP,QAHCC,EAAA,eAyCAA,EAAA,cAAS,OArChB,KAAK,OAAS,KAAK,aAAa,CAAE,KAAM,OAAQ,CACjD,CAEQ,KAAKC,EAAcC,EAAmB,GAAY,CAClD,OAAA,KAAK,aAAaD,CAAI,GAAKC,CACnC,CAEA,IAAI,MAAO,CACH,OAAA,KAAK,KAAK,OAAQ,OAAO,CACjC,CACA,IAAI,KAAM,CACF,OAAA,KAAK,KAAK,MAAO,MAAM,CAC/B,CACA,IAAI,OAAQ,CACJ,OAAA,KAAK,KAAK,QAAS,MAAM,CACjC,CACA,IAAI,UAAW,CACP,OAAA,KAAK,KAAK,WAAW,CAC7B,CACA,IAAI,SAAU,CACN,OAAA,KAAK,KAAK,UAAU,CAC5B,CACA,IAAI,WAAY,CACR,OAAA,KAAK,KAAK,YAAY,CAC9B,CACA,IAAI,OAAQ,CACX,OAAO,KAAK,KAAK,OAAO,GAAK,KAAK,GACnC,CAEA,IAAI,MAAMC,EAAO,CACX,KAAA,aAAa,QAASA,CAAK,CACjC,CAEA,WAAW,oBAA+B,CACzC,MAAO,CAAC,OAAQ,MAAO,QAAS,QAAS,YAAa,WAAY,YAAY,CAC/E,CAIO,mBAA0B,CAChC,MAAMC,EAAa,OAAO,aAAa,QAAQ,OAAO,EAClDA,GACE,KAAA,SAAS,KAAMA,CAAU,EAE/B,KAAK,OAAO,EACZ,KAAK,kBAAkB,EACd,SAAA,iBAAiB,eAAiBC,GAAU,CAChD,KAAK,QAAwBA,EAAO,QAAa,KAAA,SAAS,KAAoBA,EAAO,MAAM,CAAA,CAC/F,CACF,CAEQ,mBAA0B,CACjC,KAAK,OAAO,iBACX,QACCA,GAAU,CACL,KAAA,eAAe,KAAMA,CAAK,CAChC,EACA,EAAA,CAEF,CAEQ,eAAeC,EAAoB,EAAgB,CAC1D,MAAMC,EAAK,EAAE,OACTA,GAAA,MAAAA,EAAI,SACDD,EAAA,SAASA,EAAOC,EAAG,KAAK,EAEzBD,EAAA,cACL,IAAI,YAAY,eAAgB,CAC/B,OAAQ,KAAK,MACb,QAAS,GACT,WAAY,GACZ,SAAU,EAAA,CACV,CAAA,CAEH,CAEQ,SAASA,EAAoBH,EAAqB,CACnD,MAAAK,EAAO,SAAS,cAAc,MAAM,EAGtCA,GACEA,EAAA,aAAa,aAAcL,CAAK,EAItC,IAAIM,EAAS,MACTC,EAAQJ,EAAM,QAGdH,IAAUG,EAAM,OACVG,EAAA,OACTC,EAAQJ,EAAM,UAEXH,IAAUG,EAAM,QACVG,EAAA,QACTC,EAAQJ,EAAM,WAIT,MAAAK,EAAiB,SAAS,cAAc,0BAA0B,EACpEA,GAAkBD,IACrB,QAAQ,IAAIA,CAAK,EACFC,EAAA,aAAa,UAAWD,CAAK,GAItC,OAAA,aAAa,QAAQ,QAASP,CAAK,EAElC,QAAA,IAAIM,EAAQN,CAAK,EAGzBG,EAAM,OAASG,EACfH,EAAM,MAAQH,CACf,CAEO,0BAA2B,CAEjC,KAAK,OAAO,CACb,CAEQ,QAAS,CAChB,KAAK,OAAO,UAAY,wrCAsFc,KAAK,2CAEb,KAAK,kDACG,KAAK,2DAIb,KAAK,8CACE,KAAK,yEAGH,KAAK,uDAAqD,KAAK,SAAW,uBAAsB,KAAK,0CACrG,KAAK,qDAAmD,KAAK,SAAW,sBAAqB,KAAK,yCAClG,KAAK,yDAAuD,KAAK,SAAW,wBAAuB,KAAK,uGAKjH,KAAK,sDACI,KAAK,kCAK7C,CACD,CACA,eAAe,OAAO,eAAgBJ,CAAW"}