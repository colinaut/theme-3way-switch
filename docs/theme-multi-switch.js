var b=Object.defineProperty;var f=(l,r,t)=>r in l?b(l,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[r]=t;var u=(l,r,t)=>(f(l,typeof r!="symbol"?r+"":r,t),t);class v extends HTMLElement{constructor(){super();u(this,"shadow");this.shadow=this.attachShadow({mode:"open"})}getA(t,e=""){return this.getAttribute(t)||e}getArray(t,e=[]){const s=this.getA(t,"");if(!s)return e;let a=[];try{a=JSON.parse(s)}catch{a=s.split(",")}return Array.isArray(a)?a:e}get layout(){return this.getA("layout","around top")}get knobW(){return Number(this.getA("knob-width","1"))}get themes(){return this.getArray("themes",["light","auto","dark"])}get meta(){return this.getArray("meta-colors",[])}get theme(){return this.getA("theme")||this.themes[1]}set theme(t){this.setAttribute("theme",t)}static get observedAttributes(){return["themes","theme","meta-colors","knob-width","layout"]}connectedCallback(){const t=window.localStorage.getItem("theme");t?this.themes.indexOf(t)>=0&&this.setTheme(this,t):this.themes.indexOf(this.theme)>=0&&this.setTheme(this,this.theme),this.render(),this.addEventListeners()}addEventListeners(){this.shadow.addEventListener("click",t=>{const e=t.target;(e==null?void 0:e.checked)&&e.value!==this.theme&&(this.theme=e.value)},!1),document.addEventListener("theme-switch",t=>{const e=t.detail;e&&e!==this.theme&&this.themes.includes(e)&&(this.theme=e)})}setTheme(t,e){const s=t.themes.indexOf(e);if(s>-1){const a=document.querySelector("html"),o=document.querySelector("meta[name='theme-color']");let n=t.meta[s];if(a&&a.setAttribute("data-theme",e),o&&n){if(n==="auto"){const d=t.themes.indexOf("light"),h=t.themes.indexOf("dark");window.matchMedia("(prefers-color-scheme: dark)").matches&&h>-1?n=t.meta[h]:window.matchMedia("(prefers-color-scheme: light)").matches&&d>-1&&(n=t.meta[d])}o.setAttribute("content",n)}window.localStorage.setItem("theme",e),this.dispatchEvent(new CustomEvent("theme-switch",{detail:e,bubbles:!0,cancelable:!0,composed:!0}))}}attributeChangedCallback(t,e,s){t==="theme"&&s!==e&&this.setTheme(this,s),this.render()}render(){const t=this.themes,e=t.map(i=>`[data-active="${i}"] [part="${i}"]`).join(",")+"{color: var(--theme-switch-highlight, inherit)}",s=t.map((i,m)=>`[data-active="${i}"] .knob { left: ${m/(t.length-1)*100}%; transform: translateX(-${m/(t.length-1)*100}%); }`).join(""),a=this.knobW-.2;let o="1em 0 0",n="top";this.layout.includes("bottom")&&(o="0 0 1em",n="bottom"),this.themes.length<3&&(o="0");const d=`<style>.wrap{position:relative;display:inline-flex;gap:.3em;align-items:end}.side{height:1.2em;padding:${o}}.mid{position:relative;padding:${o}}label{cursor:pointer;line-height:1;height:100%;display:flex;align-items:center;font-weight:700;font-size:.8em}input{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;cursor:pointer;opacity:0}.mid .labels{display:flex;justify-content:space-around;position:absolute;width:100%;${n}text-align:center}.mid label{width:100%;display:flex;justify-content:center;padding:0 .2em}.track{background:var(--theme-switch-track,#88888822);height:1em;border:.1em solid var(--theme-switch-track-border,currentColor);border-radius:.2em;padding:0 .1em;position:relative;grid-area:switch;width:${a*t.length}}.track span{width:${a};bottom:0;position:relative}.knob{left:50%;transform:translateX(-50%);position:absolute;top:0;background:var(--theme-switch-knob,currentColor);transition:all .3s cubic-bezier(.4,0,.2,1);width:${this.knobW};border-radius:.1em}${s}${e}</style>`;let h=t.map(i=>`<label title="${i}" for="${i}" part="${i}"><slot name="${i}">${i}</slot></label>`);const p=t.map(i=>`<span><input value=${i} type="radio" name="theme" id="${i}" ?checked=${this.theme===i} aria-label="${i} theme" /></span>`);let c=["",""];this.layout.includes("around")&&(c[0]=`<div class="side">${h[0]}</div>`,c[1]=`<div class="side">${h[this.themes.length-1]}</div>`,h.pop(),h.shift());let g=`<div class="wrap" data-active="${this.theme}">${c[0]}<div class="mid"><div class="labels">${h.join("")}</div><div class="track" part="track">${p.join("")}<div class="knob" part="knob"></div></div></div>${c[1]}</div>`;this.shadow.innerHTML=`${d}${g}`}}customElements.define("theme-switch",v);
//# sourceMappingURL=theme-multi-switch.js.map
